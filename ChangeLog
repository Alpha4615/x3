/***********************************************************************
X3 ChangeLog

2009-01-24  Alex Schumann  <rubin@afternet.org>

	* Makefile.am: forgot to copy modpython.py where it goes.

2009-01-24  Alex Schumann  <rubin@afternet.org>

	* src/mod-python.c: added plugin hook to log to x3 logs, and worked
	out the basics of callback registration.

	* src/modpython.py: x3 logging hook and new callback registration

	* Makefile.am: install modpython.py and plugins/ during make install

	* install-r.sh: shell script to do recursive copy with exclusions

2009-01-23  Alex Schumann  <rubin@afternet.org>

	* src/mod-python.c: refactor to use class-based hook manager. Seems to
	run now. Also added better comments.

	* src/modpython.py: refactored into classes. Seems to run now. Cleaned
	up a bit.

2008-01-12  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/opserv.c: Fix for SF bug #2491886. Added OSMSG_USER_ALREADY_THERE.

2009-01-04  Alex Schumann  <rubin@afternet.org>

	* src/nickserv.c: fix access change bug when using ldap but not
	ldap_oper_group_dn.

2009-01-01  Matthew Beeching  <jobe@mdbnet.co.uk>

	* languages/README.txt: Changed validate_lang.pl to validate.pl

	* languages/validate.pl: Set executable

	* languages/lang_export.sh: Set executable

2008-12-27  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/chanserv.c: SF feature 1476390. Added nodelete option to
	MERGE.

	* src/chanserv.help: SF feature 1476390. Added nodelete option
	to MERGE.

2008-12-27  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/chanserv.c: SF feature 2353198. Patch from CaptKirk. Added
	the channel flag to the register command. Also removed the
	helping flag.

2008-12-27  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/hash.c: SF feature 2353183. Made X3 aware of +a.

	* src/hash.h: SF feature 2353183. Made X3 aware of +a.

2008-12-27  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/global.c: Added RCHANNELS which will send notices to all
	registered channels. Also changed CHANNELS to notice all channels
	instead of registered ones only.

	* src/global.h: Added RCHANNELS.

	* src/global.help: Added RCHANNELS target.

2008-12-27  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/global.c: Added AUTHED target.

	* src/global.h: Added AUTHED target.

2008-12-27  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/opserv.c: Store when alerts were last triggered.

2008-12-27  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* x3.conf.example: Added valid_channel_regex.

	* src/chanserv.c: Added valid_channel_regex.

2008-12-25  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/chanserv.c: Warning fixes.

	* src/proto-p10.c: Warning fixes.

2008-12-25  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* configure: Regenerated.

	* configure.in: Added math.h check.

	* rx/Makefile.in: Regenerated.

	* src/chanserv.c: Warning fixes.

	* src/config.h.in: Regenerated.
	
	* src/Makefile.in: Regenerated.

	* src/math.c: Warning fixes.

	* src/nickserv.c: Warning fixes.

	* src/opserv.c: Warning fixes.
 
	* src/proto-p10.c: Warning fixes.

2008-12-24  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/chanserv.c: Fix for SF bug #2423717. Invalid automode choices
	with a string will now show the invalid string rather than 0.

2008-12-24  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/nickserv.c: Fix for SF bug #2420339. Password change emails
	will not have the first time part in the email. Email change emails
	will have them though.

2008-12-24  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/chanserv.c: Fix for SF bug #2353222 (+l not being removed
	when dynlimit disabled.

2008-12-24  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/proto-p10.c: Fix for SF bug #2401693 (gsync not working properly).

2008-11-30  Matthew Beeching  <jobe@mdbnet.co.uk>

	* src/spamserv.c: Fix crash bug in ADDTRUST/DELTRUST

2008-11-25  Alex Schumann  <rubin@afternet.org>

	* src/mod-python.c: call run function instead of using
	pyrun_simplestring. Set global info for simple reply() to have what it
	needs to run.

	* src/modpython.py: new name as - interferes with module loading.
	added reply() function

2008-11-22  Alex Schumann  <rubin@afternet.org>

	* src/mod-python.c: Added ability to query info about nick or channel
	name

2008-11-16  Alex Schumann  <rubin@afternet.org>

	* src/mod-python.c: filled in some missing pieces.

	* src/mod-python.py: more demo code for testing

2008-11-16  Matthew Beeching  <jobe@mdbnet.co.uk>

	* src/chanserv.help: Minor mistake in help for 'SET MAXSETINFO'

2008-11-16  Alex Schumann  <rubin@afternet.org>

	* src/mod-python.c: further work on building basic bits of this

	* src/mod-python.py: first pass at what will be the base python script.

2008-11-13  Alex Schumann  <rubin@afternet.org>

	* src/modcmd.c: remove python tests (moved to mod-python.c)

	* src/mod-python.c: initial template based on memoserv

2008-11-12  Matthew Beeching  <jobe@mdbnet.co.uk>

	* tools/db.php: Added sample DB parser script

2008-11-06  Alex Schumann  <rubin@afternet.org>

	* src/modcmd.c,Makefile.in,src/Makefile.in,configure.in,src/config.h.in:
	Begin work on embedding python.

2008-11-06  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/proto-p10.c: Fixes for SGLINE and SSHUN. As well as a fix for
	bug 2173687 (PRIVS part of it is already fixed on trunk).

2008-10-24  Matthew Beeching  <jobe@mdbnet.co.uk>

	* src/chanserv.help: Minor spelling mistake "change" instead of
	"change"

2008-10-10  Matthew Beeching  <jobe@mdbnet.co.uk>

	* src/opserv.c: Fix for crash on OpServ SVSPART where the
	channel specified does not exist.

2008-09-30  Matthew Beeching  <jobe@mdbnet.co.uk>

	* src/nickserv.c: Prevent automatic registration of dissallowed
	nicks when registering an account

2008-09-27  Matthew Beeching  <jobe@mdbnet.co.uk>

	* src/chanserv.c: Fix for <trigger>shoot telling you to use
	 .roulette instead of <trigger>roulette

2008-09-15  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/proto-p10.c: SGLINE and SSHUN support some stuff coming
	soon in Nefarious.

2008-09-07  Matthew Beeching  <jobe@mdbnet.co.uk>

	* src/chanserv.c: Changed PEON to PAL

	* src/chanserv.help: Changed PEON to PAL

	* src/modcmd.c: Changed PEON to PAL

	* docs/access-levels.txt: Changed PEON to PAL

	* languages/de/chanserv.help: Changed PEON to PAL

	* languages/en_GB/chanserv.help: Changed PEON to PAL

2008-09-06  Matthew Beeching  <jobe@mdbnet.co.uk>

	* src/proto-p10.c: Added new PRIV_*'s to privtab

	* src/mod-snoop.c: Added support for channel mode +h

	* src/hash.h: #define's for missing PRIV_*'s

2008-09-02  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/chanserv.c: Fixed an issue with OPCHAN and channels using off
	channel.

2008-08-19  Alex Schumann  <rubin@afternet.org>

	* src/chanserv.c: fix a bug in the default wheel spin settings if they
	were not in the config file, x3 would core.

2008-07-21  Neil SPierling  <sirvulcan@sirvulcan.co.nz>

	* src/chanserv.c: Turn the kick ban all chans spin action into a
	timed ban (5 minutes). Also seperated the setting of the ban from
	the stripping of ohv. If Nefarious has halfops disabled then trying
	to strip the modes and set the ban results in the numeric being set
	as the ban. This will need to be fixed in nefarious.

2008-07-20  Alex Schumann  <rubin@afternet.org>

	* src/chanserv.c: remove spin debugging code. Fix gline/kill glitch.

	* src/config.h: bump trunk to 1.7

2008-07-19  Alex Schumann  <rubin@afternet.org>

	* src/proto-p10.c: dont print warning on uping to a jupe. added
	irc_svsquit() function

	* src/chanserv.c: rework wheel-of-misfortune a bit, allow individual
	spins to be enabled in x3.conf and make it easy to add new ones or
	change likelyhoods.

	* src/proto.h: added irc_svsquit() prototype

	* src/x3.conf.example: wheel action example configs

2008-07-18  Alex Schumann  <rubin@afternet.org>

	* src/proto-p10.c: set lastmod time to current time when sending
	glines, otherwise ircd wont burst them later.

	* src/modcmd.c: break credits out to its own command, and add svn
	version string to ctcp version reply.

2008-07-02  Matthew Beeching  <jobe@mdbnet.co.uk>

	* src/proto-p10.c: Added missing PRIV_*'s to privtab

	* src/hash.h: #define's for missing PRIV_*'s

2008-06-23  Alex Schumann  <rubin@afternet.org>

	* src/chanserv.c: Fix a bug where if spin abuse creates a clone, but an oper kills the
	clone before its auto-removed, x3 crashes. Thanks tyler and jigsy.

2008-06-23  Alex Schumann  <rubin@afternet.org>

	* src/nickserv.c: make opserv access level required to be in oper ldap
	group configurable.

	* src/nickserv.h: make opserv access level required to be in oper ldap
	group configurable.

2008-06-12  Alex Schumann  <rubin@afternet.org>

	* src/nickserv.c: fix login-on-connect logic problem when ldap libs
	 are present but ldap is not in use.

2008-04-22  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/chanserv.c: Fixed a small bug with SVSNickChange.

	* src/hash.h: Added buttaknife's patch which allows modes to be
	searched for using opserv trace. Also Fixed a small bug with
	SVSNickChange.

	* src/hash.c: Fixed a small bug with SVSNickChange.

	* src/opserv.c: Added buttaknife's patch which allows modes to 
	be searched for using opserv trace.

	* src/proto-p10.c:  Added buttaknife's patch which allows modes
	to be searched for using opserv trace.

2008-04-10  Alex Schumann  <rubin@afternet.org>

	* src/nickserv.c: Fix wrong param count check in oset password

2008-04-07  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/chanserv.c: Fixed a bug with x3 not handling kills properly.

	* src/opserv.c: Fixed a bug with x3 not handling kills properly.

2008-04-02  Alex Schumann  <rubin@afternet.org>

	* src/proto-p10.c: Provisional code for LOC account hostmask validation

	* src/nickserv.c: Provisional code for LOC account hostmask validation

2008-04-01  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* configure: Regenerated.

	* configure.in: Bumped up trunk version for X3.

2008-03-29  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/proto-p10.c: Ignore SNO messages.

2008-03-28  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* configure: Regenerated.

	* configure.in: Fixed up a typo spotted by Sakkath.

	* x3.conf.example: Fixed up a typo spotted by Sakkath.

2008-03-28  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/chanserv.c: If Nefarious 1.2.0 is in use then use SVSQUIT to
	fake a connection reset by peer quit if spin 1 comes up.

2008-03-28  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/chanserv.c: Only allow logged in people to use spin.

2008-03-28  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/chanserv.c: Added lamepart function so that spin can be used
	on Nefarious 1.1.

2008-03-28  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/chanserv.c: Added the wheel of misfortune. This will only
	work with Nefarious 1.2.0. You can upgrade X3 now even if you are
	running 1.1. Also fixed up some roulette/shoot bugs.

	* src/hash.h: Function to change nicknames in X3 when using SVSNICK.

	* src/hash.c: Function to change nicknames in X3 when using SVSNICK.

2008-03-27  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/chanserv.c: Added roulette command.

	* src/chanserv.h: Added roulette command.

	* src/mod-memoserv.c: Added email sending functionality when
	new memos are sent.

2008-03-24  Alex Schumann  <rubin@afternet.org>

	* src/nickserv.c: fix 1 param auth for ldap libs available but not
	enabled, case. Thanks jobe.

2008-03-11  Alex Schumann  <rubin@afternet.org>

	* src/opserv.c: Add svsnick command

	* src/opserv.help: add help for svsnick and improve menu a bit

	* src/nickserv.c: re-enable 1 param auth if not using ldap.

2008-03-02  Alex Schumann  <rubin@afternet.org>

	* src/spamserv.c: Possible fix for sf bug 1905760 (spamserv
	kill/reconnect segfault)

2007-07-31  Alex Schumann  <rubin@afternet.org>

        * src/proto-p10.c: ignore ALIST messages

2007-05-08  Alex Schumann  <rubin@afternet.org>

        * src/nickserv.c: fix authentication bug with ldap by temporarily
	removing account-less authentication.

	* src/nickserv.help: fix help file to reflect change

2007-05-08  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/mod-webtv.c: Allow opers to override required_mark. Also added
	SJOIN (undocumented) so opers can join IRC into channels where its
	needed as WebTV can only message clients in channels they are in.

2007-06-08  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/mod-webtv.c: Added JOIN and PART.

	* src/mod-webtv.help: Added JOIN and PART.

2007-05-08  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/mod-webtv.c: Added NICK and WHOIS commands. As well as 2 x3.conf
	config options, required_mark and valid_marks.

	* src/mod-webtv.help: Added INDEX, NICK, and WHOIS.

2007-05-08  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* configure: Run autogen.sh.

	* configure.in: Tweaks for google core dumper 1.1.

	* x3.conf.example: Basic webtv module section.

	* src/config.h.in: Run autogen.sh.

	* src/Makefile.am: Run autogen.sh.

	* src/Makefile.in: Run autogen.sh.

	* src/mod-webtv.c: Basic module for now. (Does nothing so dont
	bother compiling in).

	* src/mod-webtv.help: Empty help file for webtv module.

	* tools/core_install.sh: Update google core dumper to 1.1.

	* tools/coredumper.tar.gz: Update google core dumper to 1.1.

2007-05-06  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/proto-p10.c: Quick fix (as its 12:11am and i have work at 8:30am).
	This will stop the "Unable to find user irc.servername.com whose mark 
	is changing." messages. When a user reconnects and an existing exempt
	is on the network for the user, their lastseen time is sent out to
	all the servers. This quick fix moves the user checking part to
	the relevant part of the function that actually uses users.

2007-05-04  Alex Schumann  <rubin@afternet.org>

        * src/chanserv.c: fixed problem with giveownership logs where the
	previous owners handle could reference a free'd string.

2007-04-24  Alex Schumann  <rubin@afternet.org>

        * src/nickserv.c: add missing ifdef for inldap search.

2007-04-22  Alex Schumann  <rubin@afternet.org>

        * src/nickserv.c: change authserv search accountmask to just account.
	added inldap search criteria. added add2ldap search target.

	* src/nickserv.help: added help for ldap searching. + only add2ldap if
	all the info is there.

	* src/x3ldap.c: clean up of some error messages/handling. + add a byte
	to password malloc to maybe solve a core problem? + fix an error
	checking option.

2007-04-21  Alex Schumann  <rubin@afternet.org>
        * src/nickserv.c: remove some un-needed errors with duplicate
	add/deletes in ldap 

2007-04-21  Alex Schumann  <rubin@afternet.org>

        * src/nickserv.c: fix bug with register_user from loc causing core

2007-04-20  Alex Schumann  <rubin@afternet.org>

        * src/x3ldap.c: support for ldaps (ssl/tls) was added. ldap_host and
	ldap_port changed to ldap_uri.

	* src/nickserv.c: fixed LOC bugs with accounts that exist in ldap but
	not x3 not being created.  changed to ldap_uri config instead of
	host/port

	* src/nickserv.h: changed to ldap_uri

	* x3.conf.example: changed to ldap_uri

2007-04-09  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* README: testing.

2007-04-09  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* INSTALL: Another test.

2007-04-08  Alex Schumann  <rubin@afternet.org>

        * src/chanserv.c: fix for a core when adding kill alert for numchans 1

2007-04-06  Alex Schumann  <rubin@afternet.org>

        * src/chanserv.help: added Jigsy's mode help MODE CHANNEL and MODE
	USER

2007-04-07  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* ChangeLog: Email update.

2007-04-07  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/AUTHORS: Email update, mostly for CIA commit testing.

2007-04-07  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/helpfile.c: Added colour support $k.

2007-03-20  Alex Schumann  <rubin@afternet.org>

        * src/nickserv.c: ButtaS2sLore sent in this patch to fix the default
	style when registering new users.

2007-03-20  Alex Schumann  <rubin@afternet.org>

	* src/nickserv.c: applied patch from playa which fixes the nickname
	valid checks when registering a nick.

2007-03-20  Alex Schumann  <rubin@afternet.org>
 
        * src/nickserv.c: fix trying to do ldap when not enabled during
	cmd_register + also with cmd_unregister

2007-03-20  Alex Schumann  <rubin@afternet.org>

        * src/opserv.c: fix for stats alerts filtering

	* src/chanserv.c: dont kick lamers if they are currently exempt (+e) 

	* src/x3ldap.c: fix ldap error code to string

	* src/nickserv.c: (comment to add LOC logging)

2007-02-26  Alex Schumann  <rubin@afternet.org>

	* src/nickserv.c: fix bug with LOC logic and ldap.

2007-02-13  Alex Schumann  <rubin@afternet.org>

	* src/nickserv.c: Fix bugs with ldap cookies. Fix opt_password
	warning/crash potential

2007-02-13  Alex Schumann  <rubin@afternet.org>

	* src/x3ldap.c: Fix double-hashing of passwords when using ldap and
	resetpass cookie system. 

	* src/nickserv.c: Fix double-hashing of passwords when using ldap and
	resetpass cookie system. Fix incorrect terms in ldap email error
	message.

2007-02-12  Alex Schumann  <rubin@afternet.org>

	* src/x3ldap.c: fix ldap_delete not binding first, so causing
	access denied sometimes.

2007-02-12  Alex Schumann  <rubin@afternet.org>

	* x3.conf.example: fix ldap config example so it actually works

2007-02-12  Alex Schumann  <rubin@afternet.org>

	* src/nickserv.h: lowercase account name setting

	* x3.conf.example: lowercase account name setting

	* src/nickservc: only lowercase account names if the option is set.

2007-02-12  Alex Schumann  <rubin@afternet.org>

	* src/tools.c: adding ircd_strtolower() func

	* src/common.h: adding ircd_strtolower() func

	* src/nickserv.c: force accounts to lowercase at all inputs. ++fix
	warning ++fix another

2007-02-11  Alex Schumann  <rubin@afternet.org>

	* src/nickserv.c: fixed a bunch of ldap result value check bugs

2007-02-11  Alex Schumann  <rubin@afternet.org>

	* src/opserv.c: Added oper group support to ldap

	* src/x3ldap.c: Added group support to ldap. Fixed set email bug

	* src/x3ldap.h: Added group support to ldap. 

	* src/nickserv.c: Added group support to ldap

	* src/nickserv.h: Added group support to ldap

2007-02-11  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* tools/ldap/ldap_convert.php: Fixes after more testing.

2007-02-09  Alex Schumann  <rubin@afternet.org>

        * src/x3ldap.c: addid search function to get users email address from
	ldap

	* src/x3ldap.h: func defs for search

	* src/nicserv.c: update local copy of email address when they log
	in via ldap. fix memory leak.

2007-02-08  Alex Schumann  <rubin@afternet.org>

        * src/x3ldap.c: cleaning up and switching adduser to use the new
	crypted password scheme.

        * src/nickserv.c: testing with ldap_enabled set to 0, and/or WITH_LDAP
	not defined, uncovered some warnings etc.

2007-02-08  Alex Schumann  <rubin@afternet.org>

        * src/nickserv.c: Filling in ldap support for all password related
	operations: cmd_pass, loc_auth, etc.

2007-02-09  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* tools/ldap/ldap_convert.php: Few tweaks.

2007-02-08  Alex Schumann  <rubin@afternet.org>

	* tools/ldap/inetorganon.schema: Scheme for ldap.

	* tools/ldap/ldap_convert.php: Conversion script for converting
	x3 users to the ldap server.

2007-02-07  Alex Schumann  <rubin@afternet.org>

	* configure.in: adding compile/configure support for ssl libs (not
	        yet needed)

	* configure: updated from above.

	* src/config.h.in: adding compile/configure support for ssl libs (not
	yet needed)

	* src/x3ldap.c: ldap crypted password pain. SUpport for object classes
	in config file.

	* src/x3ldap.h: ldap crypted password pain. Support for object classes
	in config file.

	* src/nickserv.c: change password in ldap when its changed in
	nickserv. Support for object classes in config file.
	
	* src/nickserv.h: support for object classes in conf file

2007-02-07  Alex Schumann  <rubin@afternet.org>

	* src/x3ldap.c: improve error result feedback

	* src/nickserv.c: improve error result feedback (oops, fix for if
	ldap_enable is 0)

2007-02-07  Alex Schumann  <rubin@afternet.org>

	* src/x3ldap.c: ldap_add functionality

	* src/x3ldap.h: ldap_add functionality

	* src/nickserv.h: ldap_add functionality

	* src/nickserv.c: ldap_add functionality

	* x3.conf.example: ldap_add functionality

2007-02-06  Alex Schumann  <rubin@afternet.org>

	* src/x3ldap.c: fix compiling problem when non-ldap. Compile fixups
	and sanity checks.

        * configure.in: Better ldap library handling **oops ** helps to
	actually have -lldap in LIBS...

	* configure: regenerated from above ** **

	* x3.conf.example: tweaked ldap settings

	* src/nickserv.h: remove ldap config settings if not compiled in

	* src/nickserv.c: automatiaclly add users who can auth to ldap and get
	logins working.

2007-02-06 Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/x3ldap.c: Added GPL header, also change the printf's to
	log_module's as per one of the todo comments.

	* src/x3ldap.h: Added GPL header.

2007-02-05  Alex Schumann  <rubin@afternet.org>

        * src/nickserv.c: fix non-compile without ldap problem 

2007-02-05  Alex Schumann  <rubin@afternet.org>

        * src/x3ldap.c: Beginnings of ldap authentication support

	* src/x3ldap.h: Beginnings of ldap authentication support

	* src/nickserv.h: Move config struct to .h so ldap.c can see it too

	* src/nickserv.c: Beginnings of ldap authentication support

	* x3.conf.example: ldap config settings

	* src/md5.c: remove old debugging printf() code

	* src/configure.in: add --enable-ldap support to configure

	* configure: rebuilt from above

	* src/Makefile.am: add --enable-ldap support to configure

	* src/Makefile.in: rebuilt from above


2007-02-04 Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/hash.c: Bug fix for bug #1651561.

2007-02-01 Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/nickserv.c: Fixed bug #1649326.

2007-01-28  Alex Schumann  <rubin@afternet.org>
        
	* src/mod-memoserv.c: if you bind memoserv commands to chanserv's
	nick, and someone sends a memo, send them the memo from memoserv, if
	there is a memoserv (not chanserv).  Also, make the mini-help prompts
	more generic, for when they come from another bot besides memoserv.

2007-01-15  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/proto-p10.c: RPING support.

2007-01-15  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/proto-p10.c: This will hide annoying rping/rping error messages
	from the o3 alert channel when denora is linked. Will write proper
	functions when i figure out how rping n rpong works.

2007-01-15  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/spamserv.c: As kNode points to an entry in killed_users_dict,
	we need to free kNode before removing the entry. Fixed a nasty
	glibc core.

2007-01-12  Alex Schumann   <rubin@afternet.org>

        * src/mod-helpserv.c: This module is coded very poorly, with lots of
	newby c mistakes with pointers and malloc and whatnot. This fixes some
	small part of that so that user commands work again, and to reduce
	confusion.  It needs a LOT more work to be what I would consider
	safe..

2007-01-12  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/spamserv.c: Horrible but it will do, i need to rewrite
	the flag system.

	* src/spamserv.h: Oppsie, probably my fault. Fixed caps and
	badreaction being linked up.

	* src/proto-p10.c: Fixed handling of incoming SVSPART's.

2007-01-10  Alex Schumann  <rubin@afternet.org>

        * src/log.c: commented out impossible assertion which makes x3 core on
	fatal errors instead of exit cleanly.

2007-01-10  Alex Schumann  <rubin@afternet.org>

        * src/mod-helpserv.c: fix strncpy problem

2007-01-07  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/chanserv.c: Fixed some bugs in trace_check_bans (Used with
	checkrestrictions alerts.

	* src/opserv.c: Fixed up how limits are check with checkrestrictions.

2007-01-07  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* configure: Regenerated.

	* configure.in: Added HAVE_HELPSERV.

	* x3.conf.example: Seems theres been a hidden prefix option to
	allow users to use helpserv commands (ones for users not helpers).

	* src/config.h.in: Added HAVE_HELPSERV.

	* src/mod-helpserv.c: Made helpserv more useable:

	* Added CLOSEREQ for users to close their current request.

	* Added SHOWREQ for users to show their current req (equiv of SHOW).

	* Added JoinTotal, if ON then when a helper joins the channel they
	will be sent a notice of the total UNASSIGNED requests. 

	* Added AlertNew, if ON then when a user opens a new help request
	all helpers will be alerted.

	* Added SUSPEND/UNSUSPEND for suspending and unsuspending help 
	bots.

	* Added $i replacer for HelpServ SET's, changes $i to a valid
	request id. If no iq exists for another bot uses $i then all
	that is displayed is $i.

	* Changed the USERCMD function type from void to int so that we
	dont get a warning when trying to use REQUIRE_PARMS in a usercmd
	function.

	* Seeing as helpserv does its help slightly different i added in the
	HEADER/DIVIDER/FOOTER help code from modcmd.c, so that the help
	output looks the same.

	* Addded usercmd_helpserv for to access USERINDEX.

	* Allow users to use HELP even without an open request.

	* src/mod-helpserv.help: Made the index a bit more like X3, O3 etc.
	Also added a USERINDEX. Plus added help for the above things i
	added to helpserv

	* src/modcmd.c: Adjusted years.

2007-01-03  Alex Schumann  <rubin@afternet.org>

	* src/opserv.c: fix crash in ctcp version checkin

2007-01-01  Alex Schumann  <rubin@afternet.org>

	* x3.conf.example: Fixed set_shows which didnt get updated a while
	back.

2006-12-26  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/spamserv.c: Try this, tho sizeof worked fine for me with
	info sizes of 4 and 5 ("blss" and "blsss") i had no crashes.

2006-12-26  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/spamserv.c: Added CAPSSCAN for scanning caps, other related
	options added, CAPSREACTION, CAPSMIN, and CAPSPERCENT.

	* src/spamserv.h: Added caps scanning functionality.

	* src/spamserv.help Added caps scanning help

2006-12-26  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/spamserv.c: Tweaked the SET output for the EXCEPT levels.

2006-12-26  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/spamserv.c: Removed scan voiced/halfops/ops SET options.
	Added 4 new except levels, EXCEPTADVLEVEL, EXCEPTBADWORDLEVEL,
	EXCEPTFLOODLEVEL, and EXCEPTSPAMLEVEL. Users equal or above to
	the specified levels will be exempt. All levels default to
	UL_OP (200) at first.

	* src/spamserv.h: Added new except variables.

	* src/spamserv.help: Added new sections for the new except SET
	options, plus removed the level lines for now.

2006-12-25  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* Merry Christmas! :)

	* src/spamserv.c: Meh cant sleep damn people outside. Fixed a bug
	with setting exceptlevel.

2006-12-24  Alex Schumann  <rubin@afternet.org>

	* src/chanserv.c: fixed incorrect message when .dellamer is used on a
	nickname.

2006-12-25  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* Merry Christmas! :)

	* This completes RFE 1577823.

	* src/spamserv.c: Added EXCEPTLEVEL, this replaces the code that
	excepts all people who are opped etc. Only people above this level
	will be immune now. Defaults to 300 for channels without the option

	* src/spamserv.h: Added exceptlevel.

	* src/spamserv.help: Added EXCEPTLEVEL.

2006-12-25  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* Merry Christmas! :)

	* src/spamserv.c: Added trusted accounts support (RFE 1577823).

	* src/spamserv.help: ADDTRUST, DELTRUST, OADDTRUST, ODELTRUST,
	and LISTTRUST added.

2006-12-20  Alex Schumann   <rubin@afternet.org>

	* src/Makefile.in: undo temp fix

	* src/opserv.c: perm fix to HAVE_TRACK define problems

	* src/configure.in: perm fix to HAVE_TRACK define problems

	* src/config.h.in: perm fix to HAVE_TRACK define problems

2006-12-21  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/Makefile.in: Temp fix.

2006-12-20  Alex Schumann   <rubin@afternet.org>

	* src/proto-p10.c: added full mark support including as a trace
	criteria.

	* src/opserv.c:  added full mark support including as a trace
	criteria.

	* src/hash.h:  added full mark support including as a trace
	criteria.

	* src/opserv.help: documented the 'marked' criteria in trace.

2006-12-20  Alex Schumann   <rubin@afternet.org>

	* src/chanserv.c: fixing a bug with unmatching userlevels and the del*
	commands. (such as delpeon of a user with non-standard peon level)

	* src/spamserv.c: fixing memory corruption problems with dicts. Fixed
	crash with service rename, and probably many other problems.

	* src/mod-track.c: fixing memory problems, and the broken set command.
	Track may be stable now, needs large scale testing.

2006-12-20  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/chanserv.help: Opps that will teach me for cut n pasting.
	Adjusted duration line for CLVL help. Users are not removed after
	the duration they are reverted back to their previous access
	level.

2006-12-19  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/chanserv.c: check the ircd side ban list too

	* src/opserv.c: Fixed a small bug, woops.

2006-12-19  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/chanserv.c: Added trace_check_bans, cut down version of
	check_bans for checkrestrictions

	* src/chanserv.h: Declare trace_check_bans.

	* src/opserv.c: Added addalert/trace option checkrestrictions. When
	using SVSJOIN as an action this option will check the ban lists, invite
	keys and limits of the target channel and if any match or exist (invite
	etc) then the SVSJOIN wont go through

	* src/opserv.help: Added information about checkrestrictions.

2006-12-19  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/chanserv.c: Timed CLVL's. This just works like my last commit.

	* src/chanserv.h: tweaked expiry to accessexpiry and added clvlexpiry
	and lastlevel.

	* src/chanserv.help: Added information about timed clvls.

2006-12-18  Alex Schumann   <rubin@afternet.org>

	* src/mod-memoserv.c: add a 'privmsg' flag for being notified via pm
	instead of notice, when you get new memos. Fixed a buffer overrun with
	memo ids. 

	* src/mod-memoserv.help: fix-up help for settings.

2006-12-19  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/chanserv.c: New feature, channel managers can now add people
	with a duration. After the duration expires the person will be
	automatically removed and deoped.

	* src/chanserv.h: Added expiry.

	* src/chanserv.help: Added information about timed accesses.

	* src/modcmd.c: Tweaked addop, addhop etc so a duration can be
	specified.

2006-12-18  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/proto-p10.c: Reverted one of my line changes.

2006-12-17  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/opserv.c: Fixed up a couple of $b errors.

2006-12-17  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/chanserv.c: Woops forgot to init the channel mode change.

	* src/chanserv.h: Tweak to check_bans.

	* src/proto-p10.c: Add some sanity checks plus moved the +x to
	after the CMD_FAKEHOST otherwise if the person auths then gets
	marked they will cause 2 Registered quits on the IRCd. Only one
	will happen now.

2006-12-17  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/chanserv.c: Added function check_bans to check bans in a
	specific channel when needed (see below).

	* src/chanserv.h: check_bans deceleration.

	* src/proto-p10.c: First of all we dont need a handle_info when
	checking for IsHiddenHost, the IRCd takes care of this. Made it
	so we copy the fakehost into user->fakehost so X3 can check
	IsFakeHost properly. Lastly after we set a fakehost in irc_mark
	we need to recheck the users bans just in case a person has
	lamer'ed the marked hostname.

2006-12-12  Alex Schumann   <rubin@afternet.org>

	* configure.in: making google core lib optional

	* configure: regenerated

	* src/proto-p10.c: added support for sending nefarious marks

	* src/proto.h: prototype for irc_mark

	* src/opserv.help: documented new mark support. Also documented the
	svsjoin and svspart commands as they were missing.

	* src/hash.h: added MARKLEN define

	* src/opserv.c: added mark command as well as mark support in trace
	and addalert.
	
2006-12-12  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* configure: Regenerated.

	* configure.in: Add support for google core dumper. Plus updated
	tre to 0.7.5.

	* Makefile.in: Regenerated.

	* rx/Makefile.in: Regenerated.

	* src/config.h.in: Regenerated.

	* src/Makefile.in: Regenerated.

	* tools/core_install.sh: Just like tre_install.sh. This installs
	the core dumper.

	* tools/coredumper.tar.gz: Google core dumper 0.2.
	http://sourceforge.net/projects/goog-coredumper/

	* tools/tre_install.sh: Updated version to 0.7.5

	* tools/tre.tar.gz: Updated tre to 0.7.5.

2006-12-10  Alex Schumann   <rubin@afternet.org>

	* src/opserv.c: fix debug message left at wrong level ("checking
	reroute()")

2006-12-09  Alex Schumann   <rubin@afternet.org>

	* src/opserv.c: bugfixes to autorouting timer code
	improved stats routing to clean up & take an argument

	* src/opserv.h: bugfixes to autorouting timer code

	* src/opserv.help: document new stats routing syntax

	* src/timeq.c: added some usefull (commented out) debugging code for
	figuring out timer problems.

	* src/timerq.h: added some usefull (commented out) debugging code for
	figuring out timer problems.

	* src/proto-p10.c: cleanup/improve eob autorouting init

2006-12-08  Alex Schumann   <rubin@afternet.org>

	* src/opserv.c: Moving some version reply housekeeping to proto-p10.c

	* src/proto-p10.c: moving version reply storage here, adding webTV
	no_notice support (automatiaclly dont send notices if version reply
	says its a webtv user since they cant SEE notices. (other clients to
	add?))  note, this needs a version query alert to get the version from
	them.

	* src/helpfile.c: honor the no_notices user bit

	* src/hash.h: add no_notices user bit

2006-12-07  Alex Schumann   <rubin@afternet.org>

	* src/opserv.c: Add filter ability to stats alerts + fixup

	* src/opserv.help: document filter feature of stats alerts + fixup

2006-12-02  Alex Schumann   <rubin@afternet.org>

	* src/chanserv.c: fix to levels command (- were missing)

	* src/tools.c: fix warning

	* src/common.h: fix warning

	* src/chanserv.help: update online help url, changed help general to
	use new $! command char replacement code.

	* src/hash.c: fix warning when geoip is off

	* src/helpfile.c: add new '$!' code for chanserv's current trigger
	char in help files

2006-12-01  Alex Schumann   <rubin@afternet.org>

	* src/chanserv.c: Raisk pointed out that mdelop and friends dont work
	on users of non-standard access level such as 201. Fixed this by
	changing mdelop and friends to work on the range of access levels.
	Added a LEVELS command.

	* src/chanserv.h: corrected PEON access defines such that 1-150 is
	peon instead of 100-150 with 1-99 being undefined.

	* src/chanserv.help: help for new LEVELS command

	* src/helpfile.c: Improved table functions so that it automatically
	right-justifies numerical columns.

	* src/tools.c: Added helper functions str_is_number and msnprintf (an
	auto-mallocing printf function)

	* src/common.h: defines and defines for msnprintf and str_is_number


2006-11-30  Alex Schumann   <rubin@afternet.org>

	* src/chanserv.c: Modified .myaccess such that if you give it your own
	account when you are not a helper, it still works. (Requested by
	Jigsy)

	* src/nickserv.help: Corrected the help file to feed oregister based
	on email_required instead of email_enabled

	* src/nickserv.c: Fix & close sf bug 1584057 (hidden_host with no dots
	causes crash in set if no title) thanks xanjunior

2006-10-18  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/opserv.c: Minor cosmetic error noticed by Raisk. If doing an
	opserv WHOIS from another service (when bound), the channels reply
	would come from o3 instead of that service.

2006-10-18  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/opserv.c: Added in SVSPART alert/traces.

	* src/opserv.help: Added in bits for SVSJOIN, SVSPART, and VERSION.

	* src/proto.h: Added in decleration for svspart.

	* src/proto-p10.c: Extend current SVSPART functionality so that we
	can send them with traces etc.

2006-10-14  Alex Schumann   <rubin@afternet.org>

	* src/opserv.c: fix crash Buttaknife noticed if you forget chantarget 
	in svsjoin alerts. Cleanup old silent code fragments left over. Check
	for missing chantarget in alerts also.

2006-10-12  Alex Schumann   <rubin@afternet.org>
	
	* src/opserv.c: Added VERSION alert/trace reaction, so you can now
	setup x3 to version only users matching a criteria, and then another
	alert to do someting based on the version reply. This should be
	usefull for finding bots etc. Or, for example, you can make all xchat
	people join #xchat, or all mirc join #mirc etc.
	Also, there is a fix in here for SVSJOIN which i hadn't gotten
	everything working with.

	* src/proto-p10.c: added privmsg_user and version_user functions

	* src/proto.h: added privmsg_user and version_user function
	declerations

	* src/hash.h: added version_reply variable to users



2006-10-12  Alex Schumann   <rubin@afternet.org>

	* src/opserv.c: Added SVSJOIN command, to push a user into a channel,
	and a TRACE REACTION of SVSJOIN for trace and alerts. Now you can do
	something like 'trace SVSJOIN chantarget #dronebots nick bot[*'
	or send all level3 users to a perticular channel on connection, etc.

2006-10-12  Alex Schumann   <rubin@afternet.org>

	* src/chanserv.c: Make lamers not affect users on the userlist above
	inviteme level in the channel. (why kb users who can .uba and
	.inviteme back in?)

2006-10-10  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/spamserv.c: Ignore those with access (if the options are
	disabled- scanchanops, scanhalfops, scanvoiced.

2006-10-08  Alex Schumann   <rubin@afternet.org>

	* src/chanserv.c: undid 9/16/06 change of 5 second delay before
	autojoin. Not really a great solution. Instead, move auth_handler
	funcs to be called after stamping etc. thx to Buttaknife for this
	solution.

	* src/nickserv.c: move auth_func calls to after stamping, and
	commented up the cmd_auth source to make it more managable.

2006-10-04  Alex Schumann   <rubin@afternet.org>

	* src/chanserv.c: remove redundant 'none' from empty llists

2006-10-04  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/nickserv.c: Fix for bug 1555621. Cookie data will be copied
	over with odelcookie now.

2006-10-04  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/chanserv.c: Fix for bug 1551717. If automode is set to 0
	in a channel and a user auths in the channel, the user will not
	receive autoop etc if they have it enabled in uset.

2006-10-03  Alex Schumann  <rubin@afternet.org>

	* src/opserv.c: Check for connect timer entries before adding new
	ones, hopefully will fix bug 1570408 (pLaYa, let us know)

2006-09-25  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/modcmd.c: Shortened ThiefMaster to just his nick as per request
	by him.

2006-09-16  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/chanserv.c: Do autojoin 5 seconds after handle_auth. Seems its
	happening before autohide. Let me know if its still happening before
	autohide.

	* src/chanserv.help: Updated the AUTOJOIN bit.

2006-09-13  Alex Schumann   <rubin@afternet.org>

	* src/chanserv.help: improved the help listing for the info command,
	and information help category.

2006-09-10  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/mod-memoserv.c: Fixed crash bug.

	* src/spamserv.c: Ignore opers.

2006-08-28  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* README: tweaks.

2006-08-27  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/chanserv.help: Tweaked a , to .

2006-08-27  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/opserv.help: Removed privs menu so we can release a tarball.

2006-08-25  Alex Schumann   <rubin@afternet.org>

	* src/chanserv.c: fix uset reply for halfops

	* src/nickserv.help: document the 'b' account flag

2006-08-26  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* x3.conf.example: Added hidden host style option and key options
	for style 2.

	* src/hosthiding.h: Remove KEY #defines.

	* src/hosthiding.c: Set the keys only once using the conf values.

	* src/nickserv.c: Generate hidden hosts off crypt hosts instead
	of standard hidden hosts if style is 2.

	* src/proto-common.c: Generate hidden hosts off crypt hosts instead
	of standard hidden hosts if style is 2.

	* src/proto-p10.c: Set crypt host to the crypt IP if there is no
	hostname (unresolved). This is how Nefarious works.

	* src/tools.c: Generate hidden hosts off crypt hosts instead
	of standard hidden hosts if style is 2.

2006-08-24  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/chanserv.c: Added autojoin USET option, which uses SVSJOIN.

	* src/chanserv.h: Added autojoin USET option, which uses SVSJOIN.

	* src/proto.h: irc_svsjoin decelerations.

	* src/proto-p10.c: Wrote irc_svsjoin plus added the nessecary bits
	for SVSJOIN. Also wrote cmd_svsjoin for if X3 should ever recieve
	an SJ it will be handled properly as a JOIN. Did the same for
	SVSPART.

2006-08-24  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/spamserv.c: Fixed the +k issue with spamserv.

2006-08-24  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/opserv.c: Added PRIVSET Command.

	* src/opserv.help: Added PRIVSET Command. Plus contents for the
	privs section.

	* src/proto.h: irc_privs deceleration.

	* src/proto-p10.c: Fixed a compile issue plus added functions for
	setting and checking privs.

2006-08-23  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* x3.conf.example: Add a new ircd type 6 for trunk nefarious.

	* src/hash.h: Priv declerations.

	* src/opserv.c: Show privs in WHOIS output.

	* src/proto.h: client_report_privs decleration.

	* src/proto-p10.c: Handle PRIV only for type 6 servers.

2006-08-19  Alex Schumann  <rubin@afternet.org>

	* src/authserv.c: document the oset flag +b in help (hide from staff
	command.)

2006-08-19  Alex Schumann  <rubin@afternet.org>

	* src/chanserv.c: added reply command, which responds similar to calc,
	but with any message. (for use with bindings)

	* src/modcmd.c: enabled the ability to use $a $n and $m in BIND, which
	are replaced with the target command's calling user's account, nick,
	and numnick respectively. This and the above allows things like:
	BIND x3 account x3.reply your account is $a   or
	BIND x3 kickme  x3.kick $n $1-
	more to come, maybe, later.

2006-08-01  Alex Schumann  <rubin@afternet.org>

	* src/modcmd.c: Added OSI certification message to VERSION command

2006-08-09  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* x3.conf.example: Redid part of the geoip summary.

2006-08-09  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/opserv.c: If we have a city, latitude and longitude returned
	then show a map url. Some results have no city but a latitude and
	a longitude. The coordinates are useless in this case and most
	people would know where the country is around abouts.

2006-08-08  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/hash.c: Speed up city and country lookups significantly.
	Just slow for the first read but once thats done the rest is fast.

2006-08-08  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/spamserv.c: Fix a crash in spamserv (Tracker# 1535968).
	I dont know if this will work for sure as i cant reproduce it. But
	my theory is that once the user is kicked the mode node is dropped.
	Users without modes should still return a valid mode node.

2006-08-08  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/chanserv.c: Fixed a crash with giveownership. X3 would crash
	if a giveownership command was issued in a channel with no owners.

2006-08-07  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* configure: Regenerated.

	* configure.in: Added checks for GeoIP headers and libs.

	* x3.conf.example: Add in 2 options for the dat filenames of the
	city and country files. If not specified then no geoip data
	will be checked.

	* src/config.h.in: Regenerated.

	* src/hash.c: Created a function to check the geoip info from the
	dat files.

	* src/hash.h: Decelerations plus added entries to the userNode
	struct.

	* src/opserv.c: Display the GeoIP information in WHOIS.

	* src/proto-p10.c: Call the new geoip data collection function
	towards the end of AddUser.

2006-08-06  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/global.c: Fixed a bug, wasnt message_del'ing some messages.

2006-08-01  Alex Schumann  <rubin@afternet.org>

	* src/chanserv.c: Add automode 6, to just voice everyone with access.
	Idea by daniel (thx)

2006-08-01  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* This message is apart of the below one, its just seperate so
	it doesnt get lost amongst the below messages.

	* src/global.c: Fixed a warning.

2006-08-01  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* configure: Removed bahamut support, didnt even work.

	* configure.in: Removed bahamut support, didnt even work.

	* INSTALL: Removed bahamut support, didnt even work.

	* x3.conf.example: Removed bahamut support, didnt even work.

	* patches/log-pgsql.diff: Removed bahamut support, didnt even work.

	* patches/helpserv-pgsql.diff: Removed bahamut support, didnt even
	work.

	* src/config.h.in: Removed bahamut support, didnt even work.

	* src/gline.c: Removed bahamut support, didnt even work.

	* src/hash.h: Removed bahamut support, didnt even work.

	* src/nickserv.c: Removed bahamut support, didnt even work.

	* src/nickserv.h: Removed bahamut support, didnt even work.

	* src/Makefile.am: Removed bahamut support, didnt even work.

	* src/Makefile.in: Removed bahamut support, didnt even work.

	* src/proto-bahamut.c: Removed bahamut support, didnt even work.

	* src/shun.c: Removed bahamut support, didnt even work.

2006-08-01  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/global.c: Added language strings for mod-helpserv.c, opserv.c,
	spamserv.c, nickserv.c.

	* src/mod-helpserv.c: Changed global_message uses to global_message_arg's.

	* src/nickserv.c: Changed global_message uses to global_message_arg's.

	* src/opserv.c: Changed global_message uses to global_message_arg's.

	* src/spamserv.c: Changed global_message uses to global_message_arg's.

2006-08-01  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/chanserv.c: Changed global_message uses to global_message_arg's.

	* src/global.c: Added language strings for chanserv.c

2006-08-01  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/global.c: Make sure we arnt sending duplicate messages in
	some cases.

2006-08-01  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/x3.conf.example: Removed the targets option.

	* src/global.c: Wrote new function that will global message users
	and/or opers and/or helpers messages in their own langauge. The
	strings are set either in language files or in the global.c message
	struct. This allows us to send defcon notices to people and they
	will get them in their own language if they have it set.

	* src/global.h: global_message_args decleration.

	* src/opserv.c: Removed targets option for defcon as its too hard
	to send messages to people in channels if the people have different
	language settings.

2006-07-31  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/opserv.c: TODO stuff.

2006-07-31  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* x3.conf.example: Added SHUN setting for DEFCON.

	* doc/DEFCON: Added SHUN setting for DEFCON.

	* src/opserv.c: Moved the gline check to here. Also added a SHUN
	check.

	* src/opserv.h: Added SHUN setting for DEFCON.

	* src/proto-p10.c: Moved the DEFCON gline check to opserv.c

2006-07-31  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* x3.conf.example: Added new Defcon system settings

	* doc/DEFCON: Anope's Defcon doc adapted for X3.

	* src/chanserv.c: Block mode changes and channel registrations if
	required.

	* src/mod-memoserv.c: Block new memos if required.

	* src/nickserv.c: Block nick registrations if required.

	* src/opserv.c: Added in defcon system, uses some of the anope code.
	Most tho is from scratch.

	* src/opserv.h: Defcon declerations.

	* src/opserv.help: Added DEFCON entry.

	* src/proto-p10.c: If required gline new clients, also if required
	kill new clients.

2006-07-29  Alex Schumann  <rubin@afternet.org>

	* configure.in, Makefile.in, src/Makefile.in, tools/tre_install.sh,
	src/opserv.c, src/config.h.in, src/nickserv.c, src/Makefile.am: I am
	not comfortable running 'make install' on libtre from ./configure.
	This violates what the user expects in a way that can harm the system.
	Changed how the libtre checks work and provided easy-to-use install
	script. -fix link stage

	* rx/Makefile.in: fix autotools warning(s)
	
2006-07-28  Alex Schumann  <rubin@afternet.org>

	* src/nickserv.help: add odelcookie to help oper

	* x3.conf.example: update & improve x3.conf.example description of
	extended_accounts setting.

2006-07-26  Alex Schumann  <rubin@afternet.org>
	
	* src/opserv.c: Fix crash when doing reroute if routing isnt
	configured. | Voice discovered that the error message for addplan fail
	was typeo'd so not showing.

	* src/opserv.help: slight changes to routing help.

	* src/chanserv.c: let non-staff see when channels were registered with
	.info

2006-07-24  Alex Schumann  <rubin@afternet.org>

	* src/proto-p10.c: dont burst channels with 0 users in them (which
	were created by alert discrims, most likely)

2006-07-23  Alex Schumann  <rubin@afternet.org>

	* x3.conf.example: Added chanserv "modes" to example - use to control
	what usermodes chanserv gets. Mainly for setting +d or not, if you
	have nef 1.0 'b:' lines setup.

2006-07-25  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/nickserv.c: If theres no title set then the default title
	will therefore be the first part of hidden_host in x3.conf.example,
	so for consistency with opt_fakehost we will print this.

2006-07-25  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/nickserv.c: The reason why theres no arg rubin is that
	if you want to print the fakehost then u dont specify an arg.
	This tells opt_fakehost to set fake to the current fakehost
	and pass it on to be printed.

2006-07-23  Alex Schumann  <rubin@afternet.org>

	* src/nickserv.c: Add config file regex fakehost test + sanity
	checking in title as well (fixed).

	* src/mod-memoserv.c: Fixed crash bug in memosearv read. (check argc
	instead of argv[2]==null since argv's dont get set null.

2006-07-23  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/mod-memoserv.c: Fix to a crash/output corruption issue.

	* src/proto-p10.c: Host in topic supports sethost and fakehost
	now.

2006-07-21  Alex Schumann  <rubin@afternet.org>

	* src/proto-p10.c: Added support for irc_wallop, irc_squit,
	irc_connect, and added callbacks to handle connect failures and
	successes. (All prep for auto routing system) 

	* src/proto.h: Added support for irc_wallop, irc_squit,
	irc_connect, and added callbacks to handle connect failures and 
	successes. (All prep for auto routing system)

	* src/opserv.help: Help entries for auto routing system + fix typeo in
	routing example

	* src/hash.h: New structs for auto routing system

	* src/opserv.c: The long-awaited X3 Auto Routing Plan system! + reduce
	error message to debug message.

	* src/opserv.h: The long-awaited X3 Auto Routing Plan system!

	* src/modcmd.c: added 'routing' main command alias.

2006-07-16  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* x3.conf.example: Added host_in_topic option for sending full
	nick!user@host if its enabled. Default to one as Nefarious is
	default to TRUE for HOST_IN_TOPIC. There will be wierdness if
	you have this enabled on X3 and not on your Nefarious server.

	* src/proto-p10.c: Make use of host_in_topic.

2006-07-13  Alex Schumann  <rubin@afternet.org>

	* src/opserv.c: make the bot reply from the nick you /msg in all
	cases, if commands are bound to a different bot.

	* src/nickserv.c: make the bot reply from the nick you /msg in all
	cases, if commands are bound to a different bot.

	* src/chanserv.c: make the bot reply from the nick you /msg in all
	cases, if commands are bound to a different bot.

	* src/mod-memoserv.c: Make all memoserv commands reply from the bot you
	msg, not the defined memoserv bot, if commands are aliased to other
	bots. This may also fix the crash bug playa reported at
	http://www.unrealgamers.net/forums/index.php?showtopic=138

2006-07-11  Alex Schumann  <rubin@afternet.org>

	* src/chanserv.c: Fixed some weirdness with nef 1.0's 2nd topic setter
	and some x3 topic functions.

	* x3.conf.example: Improved server/type setting documentation,
	and changed default to 5.

2006-07-11  Alex Schumann  <rubin@afternet.org>

	* src/opserv.c: fixed silent alerts not getting picked up from db file
	on read/load.

2006-07-11  Alex Schumann  <rubin@afternet.org>

	* src/opserv.c: add sanity checking to jupe to avoid catastrophic loop
	when adding an invalid jupe servername or numeric.
	this closes bug number 1513510.

	* src/modcmd.c: if pubcmd is set higher than your level, only respond
	with the denied msg if the command was actually found. this closes bug
	number 1509382.

2006-07-10  Alex Schumann  <rubin@afternet.org>

	* src/chanserv.c: fixed crash bug trying to deref the handleinfo of a
	non-logged-in user (null pointer)

2006-07-09  Alex Schumann  <rubin@afternet.org>

	* src/nickserv.c: fixed bug where unignores were getting sent to the
	user multiple times, instead of to each online nick once.

2006-07-09  Alex Schumann  <rubin@afternet.org>

	* src/nickserv.c: Fixes for addignore/delignore corruption +missed a
	spot. Ugh, messed up the fix. Trying again :)

2006-07-10  Neil Spierling <sirvulcan@sirvulcan.co.nz>

	* src/chanserv.c: INVITE now checks the targets ignore/silence list.
	If the target is ignoring the person inviting them then the invite
	is denied.

2006-07-07  Alex Schumann  <rubin@afternet.org>

	* src/mod-memoserv.c: pLaYa reported a crash/corruption bug in
	memoserv most easily seen when sending short memos. Rewrote the flag
	handling part of memo send to correct it.

2006-07-05  Alex Schumann  <rubin@afternet.org>

	* src/helpfile.c: pLaYa pointed out the table code row count is off by
	one. Fixed.

2006-06-27  Neil Spierling <sirvulcan@sirvulcan.co.nz>

	* configure: Regenerated.

	* configure.in: Make use of TRE regexp library. Its more powerful
	than the standard library (http://laurikari.net/tre/index.html).
	Im also pondering adding services side regexp bans, X3 would
	probably required a channel flag called say advanced that can
	only be set by the owner. If enabled then regexp bans can be
	used. I also added an output saying what modules are enabled,
	what protocol is enabled, what malloc is choosen and if debugging
	is enabled. Just a bit of a message as the user will of seen
	programs just finish compiling and he/she/it may think it
	was X3 compiling, but it was just TRE compiling. They still need
	to compile X3.

	* src/config.h.in: Regenerated.

	* src/Makefile.am: Tweak for TRE.

	* src/Makefile.in: Regenerated.

	* src/nickserv.c: Use the new regex.h Im sure -I includes get
	called before system includes like /usr/include.

	* src/opserv.c: Use the new regex.h Im sure -I includes get
	called before system includes like /usr/include.

	* src/tools/tre.tar.gz: TRE 0.7.4. Configure will untar and
	compile this just before configure finishes up. Sits around
	470KB, rather than another 2.5MB if i TRE untarred. I suppose
	i could get it down a bit more using Bzip but there are some
	boxes out there still without bzip.

2006-06-25  Neil Spierling <sirvulcan@sirvulcan.co.nz>

	* src/mod-memoserv.c: Better history implementation. A seperate
	table is used for history entries. Entries contain the same
	fields as the memo table except for the message, read, and flags.
	Entries are only removed from the history db when they get
	expired by do_expire (older than message_expire). Also fixed
	up a issue with STATUS. On AfterNET we were getting huge large
	for the amount of memos. I now realise it was reading the amount
	of users. It now reads the proper amount of memos. I also a count
	for history entries.

	* src/mod-memoserv.help: EXPIRE handles history and memos now.

2006-06-25  Neil Spierling <sirvulcan@sirvulcan.co.nz>

	* src/mod-memoserv.c: Make use of ignore lists when trying to
	send memos.

2006-06-25  Neil Spierling <sirvulcan@sirvulcan.co.nz>

	* src/spamserv.c: Crash fix (finally). Been meaning to do this
	for a while now.

2006-06-23  Alex Schumann  <rubin@afternet.org>

	* src/modcmd.help, src/opserv.help, src/helpfile.c, src/helpfile.h,
	src/modcmd.c, src/nickserv.c: Improvements to
	table output and help display. 

	* src/mod-memoserv.c: fix segfault

2006-06-23  Alex Schumann  <rubin@afternet.org>

	* src/chanserv.c: Backing out the bantype patch because it sucks _bad_.
	fix it and re-apply if you want it..

	* src/chanserv.h: Backing out the bantype patch.

	* src/chanserv.help: Backing out the bantype patch.

2006-06-20  Neil Spierling <sirvulcan@sirvulcan.co.nz>

	* src/mod-memoserv.c: Fixed a bug.

2006-06-20  Neil Spierling <sirvulcan@sirvulcan.co.nz>

	* src/mod-memoserv.c: Added basic HISTORY command. At the moment
	if the recipient deletes the memo it will not be listed in the
	HISTORY list.

	* src/mod-memoserv.help: HISTORY entry.

2006-06-20  Neil Spierling <sirvulcan@sirvulcan.co.nz>

	* src/mod-memoserv.c: Added new flags, see below.

	* src/mod-memoserv.help: Opps forgot the read reciept stuff. Also
	added flags for always ignoring read reciepts and always sending
	read reciepts.

2006-06-20  Neil Spierling <sirvulcan@sirvulcan.co.nz>

	* src/mod-memoserv.c: Added CANCEL command for cancelling memos
	that you have sent, aslong as they have not been read yet.

	* src/mod-memoserv.help: CANCEL entry plus tweaked some read
	recipient to read reciept stuff.

2006-06-20  Neil Spierling <sirvulcan@sirvulcan.co.nz>

	* src/mod-memoserv.c: Redid the db stuff, it now writes users
	settings and memos to the memoserv database.

2006-06-20  Neil Spierling <sirvulcan@sirvulcan.co.nz>

	* src/mod-memoserv.c: Small bug fix.

2006-06-20  Neil Spierling <sirvulcan@sirvulcan.co.nz>

	* src/mod-memoserv.c: Added read recipient support via SEND using
	-r as a flag. Messages with requested read recipients have a (r)
	shown beside the sender nick in LIST. People can ignore a read
	recipient using -i when reading the message via READ. Its all
	in the help file.

	* src/mod-memoserv.help: Added read recipient relevent bits.

	* src/opserv.help: Added halfopping functions.

2006-06-19  Neil Spierling <sirvulcan@sirvulcan.co.nz>

	* src/x3.conf.example: Forgot a ;.

2006-06-19  Neil Spierling <sirvulcan@sirvulcan.co.nz>

	* src/mod-memoserv.c: Make use of SET LIMIT.

2006-06-19  Neil Spierling <sirvulcan@sirvulcan.co.nz>

	* src/mod-memoserv.c: Fixed SET bugs and renabled LIMIT now.

2006-06-19  Neil Spierling <sirvulcan@sirvulcan.co.nz>

	* src/mod-memoserv.c: On Second thoughts dont enable LIMIT now.

2006-06-19  Neil Spierling <sirvulcan@sirvulcan.co.nz>

	* x3.conf.example: Max limit for Memoserv LIMIT option.

	* src/hash.h: Fixed halfops issue.

	* src/mod-memoserv.c: Added SET LIMIT option for the maximum
	amount of memos you can have. This does not do anything yet as
	im committing the half ops fix now. This code is fine it just
	allows you to adjust the limit for now.

2006-06-12  Neil Spierling <sirvulcan@sirvulcan.co.nz>

	* x3.conf.example: Commented out SpamServ module as there are bugs
	and i cant give a definate date as to when i can fix it. Im not
	home much these days.

	* src/mod-memoserv.c: Redid the SET code using some whatnet code
	by wasted. Tweaked here and there. Also added some formatting in
	LIST and SET like chanserv SET. Oh and MemoServ will join
	autojoin_channels if MemoServ is in a seperate nickname.

	* src/mod-memoserv.help: Added OSET and done some tweaking.

	* src/nickserv.c: Allow the use of get_victim_oper outside of
	nickserv.c.

	* src/nickserv.h: Allow the use of get_victim_oper outside of
	nickserv.c.

2006-06-07  Alex Schumann  <rubin@afternet.org>

	* src/chanserv.help: Added a couple set helps that were missing.
	
	* src/helpfile.c: fix missing space in multi-column table output such
	as /msg opserv commands * (with nickserv tablewidth setting >60)

2006-06-06  Alex Schumann  <rubin@afternet.org>

	* src/opserv.c: Change how addalert silence works, so that its a
	parameter instead of an action, and also works with trace now. 

	* x3.conf.example: Added a config setting of level needed to use 
	'silent yes' in trace/addalert.

2006-06-04  Alex Schumann  <rubin@afternet.org>

	* src/nickserv.c: Fix oregister

	* src/nickserv.help: Update help for oregister

2006-06-05  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/proto-p10.c: Properly handle incomming manual silences.

2006-06-05  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/common.h: pretty_mask etc declerations.

	* src/nickserv.c: Parse the mask through pretty_mask before adding
	it. Normal ircd side silences go through this, this just keeps
	things looking the same and if a user tries to remove a silence
	added by ADDIGNORE they will be able to. Oh and I HATE GLIBC :P

	* src/proto-p10.c: Send a + if adding a silence.

	* src/tools.c: pretty_mask and one other function for reformatting
	a hostname so its pretty :) from IRCu.

2006-06-04  Alex Schumann  <rubin@afternet.org>

	* src/nickserv.c: Send silences to every nick of a handle, not the
	nick that did the command.

2006-06-04  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/main.c: Moved spamserv initilization to after chanserv.

	* src/spamserv.c: Read the db earlier.

2006-05-30  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* configure: Regenerated.

	* configure.in: Bumped version and changed list email.

	* x3.example.conf: Added SpamServ options.

	* src/chanserv.c: Join SpamServ if enabled when chanserv joins.

	* src/chanserv.h: Declerations

	* src/main.c: Init the new SpamServ service.

	* src/Makefile.am: Added SpamServ files.

	* src/Makefile.in: Regenerated

	* src/modcmd.c: Added SpamServ to REBINDALL.

	* src/opserv.c: Slab/X3 malloc STATS MEMORY updates.

	* src/proto-common.c: Make sure SpamServ gets notices.

	* src/spamserv.c: New service that checks for spamming, floods etc.
	Requires an oper to register it to a channel for it to work.

	* src/spamserv.h: Decelerations.

	* src/spamserv.help: Help entries for SpamServ.

2006-05-29  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* Below functions by Wasted (Martijn Smit) <wasted@lostdomain.org>

	* src/chanserv.c: Added selectable bantypes.

	* src/chanserv.h: Added selectable bantypes.

	* src/chanserv.help: Added help entries.

2006-05-29  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/nickserv.c: Added user option ADVANCED, when we add more
	advanced commands users will need to set this to see the options
	in help. Further work in helpfile is still needed afaik. This is
	just the basics.

	* src/nickserv.h: Advanced option declerations.

	* src/nickserv.help: Added option ADVANCED, also added AUTOHIDE.
	Seems no one added that when they added the AUTOHIDE option.

2006-05-28  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* Below functions by Wasted (Martijn Smit) <wasted@lostdomain.org>

	* x3.example.conf: Added new options- god_timeout, autojoin_channels,
	and denied_fakehost_words. Also dropped refresh_period for chanserv
	set resync.

	* src/chanserv.c: Added god_timeout, disable god mode automatically
	when the period times out. Also added a new set option- resync, auto
	resyncs the userlist every 3, 6, 9, or 12 hours (or not at all).

	* src/chanserv.help: Added entry for SET RESYNC.

	* src/global.c: Join global into autojoin_channels if enabled.

	* src/main.c: Some tweaking for autojoin_channels.

	* src/mod-memoserv.c: If a user has memos and notify on login
	enabled then only display the notify notice on login and not
	during a netburst.

	* src/mod-track.c: Quashed a warning.

	* src/modcmd.c: Added functions for god_timeout. Also added wasted
	to VERSION output for credits for these features.

	* src/nickserv.c: Added denied_fakehost_words, deny the words set
	there if an oper trys to use them in a fakehost. Also autojoin
	chanserv if enabled into autojoin_channels.

	* src/opserv.c: Added REFRESHMAX to reset the max count, ie for 
	after a drone attack. Also join opserv and reserved nicks into
	autojoin_channels if opserv/reserved is enabled.

	* src/opserv.help: Added entry for REFRESHMAX.

2006-05-25  Alex Schumann  <rubin@afternet.org>

	* src/proto-p10.c: make non-existant server type setting not crash x3.

	* src/nickserv.help: Added newby tip to authserv registration 
	help (about < and >)

	* src/mod-track.c: Fixed crash when a server kicks a person (tried to
	deref null kicker)

2006-05-23  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/chanserv.c: Set SWHOIS's when a user auths.

	* src/hosthiding.c: Fixed a segfault.

	* src/nickserv.c: Epithets now use SWHOIS.

	* src/proto.h: Declerations for irc_swhois.

	* src/proto-p10.c: Handle SWHOIS's.

2006-05-23  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/hash.h: Bumped SOCKIPLEN

	* src/hosthiding.c: Functions to crypt IPv6 addresses.

	* src/hosthiding.h: IPv6 function declerations.

	* src/proto-p10.c: If the users ip address is IPv6 then crypt it
	with the ipv6 crypting function.

2006-05-23  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/hash.h: Bits needed for other type of host hiding.

	* src/hosthiding.h: Nefarious style 2 host hiding declerations.

	* src/hosthiding.c: This will generated crypted style 2 Nefarious
	hidden hosts and ips. Currently they are just displayed in O3
	WHOIS. Im yet to expand this.

	* src/Makefile.am: Added hosthiding.c and hosthiding.h.

	* src/Makefile.in: Regenerated.

	* src/opserv.c: Display crypted hosts n ips in WHOIS.

	* src/proto-p10.c: Generate crypted hosts n ips on everyone and
	save them in user->crypthost user->cryptip.

2006-05-22  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/chanserv.c: Set ignores when you authenticate.

	* src/nickserv.c: Added ADDIGNORE, OADDIGNORE, DELIGNORE ODELIGNORE.
	Used for centralized silence list management. Currently set ignores
	can be viewed in ACCOUNTINFO for via ircd SILENCE.

	* src/nickserv.h: Declerations.

	* src/nickserv.help: Added help entries for above commands.

	* src/proto.h: Declerations.

	* src/proto-p10.c: Functions to handle silences

2006-05-18  Alex Schumann  <rubin@afternet.org>

	* src/proto-p10.c: Fixed up the track module a bit more

	* src/hash.c: Fixed up the track module a bit more, including
	reporting correctly when X3 kicks someone. This should affect mrsnoopy
	as well, hopefully wont cause any bugs.

	* src/mod-track.c: Fixed up the track module a bit more - made track
	all/none work

2006-05-18  Alex Schumann  <rubin@afternet.org>

	* src/chanserv.c: adding 'classic' view, via patch submitted by pLaYa

	* src/nickserv.c: adding 'classic' view, via patch submitted by pLaYa

	* src/nickserv.h: adding 'classic' view, via patch submitted by pLaYa

	* src/nickserv.help: adding 'classic' view, via patch submitted by pLaYa

2006-05-18  Alex Schumann  <rubin@afternet.org>

	* src/chanserv.c: re-disabled netrider kicking. Somehow this got included back
	in.

	* src/mod-track.c: some cleanups and textual changes, to make the commands
	slightly more user friendly.

2006-05-16  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/proto-p10.c: Changed 050 specfic topic stuff to a conf setting

	* src/x3.conf.example.: adding 050 'type' to server config (rubin
	fixed missing ';' and changelog entries)

2006-05-16  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* Most files: Heh i cant be bothered listing all files, see websvn
	if you want specific files. I just added a new tracking module, its
	just like snoop except it targets specified users. The actual
	commit is in the previous revision, i just forgot to update this to
	tick over the svn version in version output.

2006-05-15  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* Most files: Major update off the new release of srvx 1.3.1. Also
	seeing as the new updates dont all have changelog entries ive dropped
	the 2 srvx Changelog files and renamed the X3 one to ChangeLog.

2006-03-20  Alex Schumann  <rubin@afternet.org>

	* src/chanserv.c: core fix; check if theres a handle_info before looking
	at style...

	* src/helpfile.c: core fix; check if theres a handle_info before looking
	at style...

2006-03-17  Alex Schumann  <rubin@afternet.org>

	* src/chanserv.c: more clean style changes

2006-03-17  Alex Schumann  <rubin@afternet.org>

	* src/chanserv.c: Added nickserv 'style' setting back. (HomeDawg
	and dhp1080 made me do it)  Needs lots of work to remove ---- 
	headers for 'clean' setting.

	* src/helpfile.c: Added nickserv 'style' stetting back.

	* src/nickserv.help: Added help for set style.

	* src/mod-helpserv.c: make style affect table outputs.

	* src/nickserv.c: Added nickserv 'style' setting back.

	* src/nickserv.h: Added nickserve 'style' setting back.

2006-03-17  Alex Schumann  <rubin@afternet.org>

	* src/proto-p10.c: Added conf setting for extended_accounts for
	backward compatability with stock undernet ircd.

	* x3.conf.example: Added conf setting for extended_accounts for
	    backward compatability with stock undernet ircd.

2006-03-06  Alex Schumann  <rubin@afternet.org>
	
	* src/opserv.help: Added missing trace criteria to help, 
	and fixed up a few other bits of help around that topic.

2006-01-16  Alex Schumann  <rubin@afternet.org>

	* src/tools.c: created an email valididty function

	* src/nickserv.c: check valididty of email better

	* src/sendmail.c: check validity of email better

2006-01-06  Alex Schumann  <rubin@afternet.org>

	* src/opserv.c: fix gtrace, trace, csearch and alerts to work when aliased
	to a different bot, eg chanserv, and to reply from the correct nickname.
	also a bunch of whitespace changes

	* src/nickserv.c: begin work on making nickserv commands bind without
	responding from the wrong nick. also a bunch of whitespace changes

	* src/hash.h: whitespace

    * src/opserv.help: improved QUERY helpfile. (though command itself still
	has bugs)

2005-12-14  Alex Schumann  <rubin@afternet.org>

	* src/chanserv.help: added set bantimeout help

2005-11-08  Alex Schumann  <rubin@afternet.org>

	* src/modcmd.c: cleaned up tabs, added hack to display help on JOINER
	aliases properly.

	* src/modcmd.help: Added note about escaping spaces to modcmd help.

	* src/nickserv.help: Improved help files

	* src/chanserv.help: Improved help files

2005-10-13  Alex Schumann  <rubin@afternet.org>

	* src/proto-p10.c: ignore remote /lusers

2005-09-13  Alex Schumann <rubin@afternet.org>

	* src/global.c: Changed motd header style

	* src/nickserv.help: Improved directions for getting and using
	accounts.

	* src/chanserv.help: Improved directions for getting and using
	accounts.

2005-08-13  Alex Schumann  <rubin@afternet.org>

	* src/chanserv.c: Fixed a bug i created using masks in ,kick. Restored
	some *@* protection.

	* src/tools.c: added function to detect an overmask (too general)

	* src/common.h: added function to detect an overmask (too general)

2005-08-12  Alex Schumann  <rubin@afternet.org>

	* src/chanserv.c: Modified resync to work accourding to automode
	setting, and fixed a buffer overflow problem.

	* src/chanserv.help: updated set automode and rsync help.

	* src/nickserv.h: Added an autohide setting to nickserv/authserv that
	sets +x on AUTH.

	* src/nickserv.c: Added an autohide setting to nickserv/authserv that
	sets +x on AUTH.

2005-08-12  Alex Schumann  <rubin@afternet.org>

	* src/chanserv.c: Cleanup. Added 'automode' channel setting in place
	of 'voice' setting.  + Rewording setting help

	* src/chanserv.h: Cleanup. Added 'automode' channel setting in place
	of 'voice' setting.

	* src/chanserv.help: Added help for automode. + Rewording setting help

2005-08-11  Alex Schumann  <rubin@afternet.org>

	* src/proto-p10.c: added irc_umode() to send usermodes (Life4Christ)

	* src/proto-bahumit.c: added irc_umode() to send usermodes, untested..

	* src/proto.h: added irc_umode() to send usermodes (Life4Christ)

	* src/nickserv.c: Added option to have authserv oper/admin people with
	opserv access. (Life4Christ)

	* src/opserv.c: Added admin_level config option
	
	* src/opserv.h: Added admin_level config option

2005-08-11  Alex Schumann  <rubin@afternet.org>

	* src/proto-p10.c: Avoid duplicating an oper in curr_opers (,staff
	command) when nef* bug sends the +o twice. ++fix bug in patch

2005-08-09  Alex Schumann  <rubin@afternet.org>

	* src/chanserv.c: Fixed banTimeout to actually remove the bans :)

2005-08-08  Alex Schumann  <rubin@afternet.org>

	* src/chanserv.c: Added banTimeout feature to .set

	* src/chanserv.h: added banTimeout feature to .set

	* src/recdb.c: Added some better error catching in database_get_data()

        * src/proto-common.h: tabs

	* x3.conf.example: added bantimeout to default set list, and ban
	timeout frequency config setting.

2005-08-04  Alex Schumann  <rubin@afternet.org>

	* src/chanserv.c: Changed kick protected message to one without %s or
	$b because the kick function doesnt support replacements.

	* src/tools.c: fixed spelling error in comment.

2005-07-28  Alex Schumann  <rubin@afternet.org>

	* src/chanserv.c: fixed crash bug in 8ball (required params was off by
	one)

	* src/proto-p10.c: Ignore wallusers (WU) tokens from server without
	whining.

2005-07-26  Alex Schumann  <rubin@afternet.org>

	* x3.conf.example: Updated from live afternet file and improved help
	and layout. Added vim directive to set syntax type.

	* src/chanserv.c: ported x2's 8ball in, and improved it.

	* src/math.c: Added osiris' hack to do_math for supporting
	2(10)  and 2pi etc. Improved it to handle pi2 also.

	* src/chanserv.help: updated 8ball help and added 'myaccess' to
	information help index.

2005-07-18  Alex Schumann  <rubin@afternet.org>

	* src/proto-p10.c: added +L awareness

	* src/hash.h: added +L awareness

	* src/chanserv.help: changed set ctcpreaction help

2005-07-18  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/modcmd.h: Lets make some functions global.

	* src/modcmd.c: Log hostmasks no matter what.

	* src/log.c: Lookup commands if they are from OpServ in the log.
	If they match channel specific commands like OP, DEOP, etc then
	we will display them in a LAST command (assuming the person doing
	the LAST is an oper). Normal clients wont see commands that have
	been performed by OpServ.

2005-07-15  Alex Schumann  <rubin@afternet.org>

	* src/chanserv.c: Changed around ctcpreaction setting so it:
	    a) doesnt crash.
	    b) doesnt kick userlist members ever
	    c) has only 1 setting needed to control it
	* src/chanserv.h: removed some old oplevel stuff.

2005-07-14  Alex Schumann  <rubin@afternet.org>

	* src/proto-p10.c: made it ignore EX, MK and PRIV tokens to
	remove errors from log. Fixed problem with missing break; in
	channel mode c parsing (reed).

	* src/mod-memoserv.c: Improved memoserv 'you have notes' message.

	* src/log.c: Changed channel log target to send PRIVMSG instead of
	NOTICE. (Ghozer)

2005-05-07  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* configure: Regenerated.

	* configure.in: Added checks for tgmath.h.

	* src/chanserv.c: Added new command LAST, from X2. Similar to
	EVENTS except its file based. Bear in mind you dont have to use
	both. You can bind what you want to use. Commented out zoot_list
	as its not in use, just a warning fix.

	* src/hash.c: Warning fix.

	* src/log.h: Misc defines.

	* src/log.c: Logging functions from X2.

	* src/math.c: If tgmath.h doesnt exist then include some other
	files that contain the functions we require.

	* src/modcmd.c: Added a small ctcp reply, gender.. like gnuworld X.

	* src/proto-p10.c: Added chanserv.h #include to squash a small
	compile error. Made X3 understand MARK's to a small point. Fixed
	a small parsing bug with exempts.

2005-07-06  Alex Schumann  <rubin@afternet.org>

	* src/chanserv.c: Fixed a couple awkward looking outputs with userlist

	* src/opserv.c: Fixed an awkward output of trace count etc.

2005-06-22  Alex Schumann  <rubin@afternet.org>
	* src/chanserv.help: Improved DURATION help

	* src/tools.c: Changed 'M' duration to 30 days (not 31) as its
	a better average.

2005-05-27  Alex Schumann  <rubin@afternet.org>

	* src/chanserv.c: Improved usability of register command, fixed
	unregister reply.

	* src/chanserv.help: Improved usability of register command

2005-05-27  Alex Schumann  <rubin@afternet.org>

	* src/chanserv.c: Resync working now

2005-05-27  Reed Loden  <reed@reedloden.com>

	* src/chanserv.c: Fixed an incorrectly named message. Fixed some
	grammar issues in the message send to pending users. Fixed a
	problem with some of the resync code.

2005-05-27  Alex Schumann  <rubin@afternet.org>

	* src/chanserv.c: make pending add check if the person is already on
	the userlist before re-adding them (thx exec & reed for noticing this)
	Fix capitalisation of I in pending notice.

2005-05-18  Alex Schumann  <rubin@afternet.org>

	* src/modcmd.c: reed pointed out that modcmd non-command help wasnt
	working, and pointed me to the opserv helpfiles command, which shows
	what services search what help files.  This fixes the help command to
	search that list as it should. Still need to modify the 'default'
	helpfile search bindigs because I dont think chanserv should respond
	to help from opserv's db, etc.  See opserv's 'helpfiles' command.

	* src/modcmd.help: clarified 'helpfiles' help.

2005-05-18  Alex Schumann  <rubin@afternet.org>

	* src/helpfile.c: make send_help() return true/false and not send
	errors so svccmd_send_help can 'take control' of things.

	* src/modcmd.c: Fixed up the help system (again) / find aliased
	commands help if none exists. / Display no help for that command on
	commands (instead of topic)

	* src/modcmd.h: Fixed up the help system (again)

	* src/global.c: Fixed syntax display

	* src/chanserv.help: Removed =---= formatting, fixed a few things.
	*spelling ++more spelling (thx reed)

	* src/nickserv.help: Removed =---= formatting, fixed a few things.
	*spelling ++more spelling (thx reed)
	
	* src/opserv.help: Removed =---= formatting, fixed a few things.
	++spelling (thx reed)

	* src/global.help: simplified index

	* src/nickserv.c: Changed message users get when their email is
	already used for an account, fixed syntax help

	* src/opserv.c: fixed syntax help

2005-05-16  Alex Schumann  <rubin@afternet.org>

	* src/chanserv.help: Fixed a couple ban/lamer conversions i missed in
	the help file.

2005-05-04  Alex Schumann  <rubin@afternet.org>

	* src/modcmd.c: added a 'rebindall' command to assist with
	upgrades and changes which change command bindings.

	* src/modcmd.help: modified help to reflect above

	* src/opserv.help: modified help to reflect above

	* src/chanserv.c: changed addban, addtimedban, delban, bans etc
	to addlamer, dellamer, addtimedlamer, lamers to reduce confusion
	between channel bans (+b) and x3 remembered bans (lamers)

	* src/chanserv.help: modified help to reflect above

	* UPGRADE: added use of rebindall to upgrade instructions

2005-05-04  Alex Schumann  <rubin@afternet.org>

	* src/chanserv.c: added an 'adduser pending' feature, where if
	someone isn't authed x3 will ask them to /auth or register, and then
	automatically finish adding them to the channel when they do.
	Fixed email bug with adduser pending

	* src/chanserv.h: adduser pending

	* src/hash.c: adduser pending

	* src/hash.h: adduser pending, and increased maxbans to 128 from 45.

	* src/nickserv.c: adduser pending cleanup and activation code,
	                  Arch sync (Avoid losing channel information when
			  replacing an account using the mergedb command.)

	* src/proto-p10.c: adduser pending cleanup code 

	* src/nickserv.help: improved set and register help

2005-05-04  Alex Schumann  <rubin@afternet.org>

	* src/chanserv.c: changed uset noautoop to uset autoop (removed double
	negitive). Added set voice to provide control over use of voice.
	Implimented a basic chanserv db version control system for upgrading
	seamlessly.

	* src/chanserv.help: adjusted help to reflect voice and uset autoop
	changes.

	* src/hash.h: updated ssz comment from z to Z

	* src/modcmd.help: rewrote BIND help

	* src/proto-p10.c: Added Z (sslonly) support back in

	* UPGRADE: created file to document upgrading procedures

2005-04-23  Alex Schumann  <rubin@afternet.org>
	* src/chanserv.c: removed settings: oplevel, halfoplevel, and
	voicelevel, hard coding them to OP, HALFOP, and PEON. Changed
	topicmask to be an on or off setting, uninfluenced by enftopic. 
	Added feature to use mask on /topic in addition to ,topic sets.
	Removed special consideration for ircops in protect_user()

	* src/chanserv.help: updated documentation to reflect the new and
	much simpler topicmask feature, and removed op/voice levels.

	* src/nickserv.c: added tailing 'end of' line for accountinfo
	for non-opers too.

	* src/modcmd.c: tweaked alias notification for help and breef help.

2005-04-20  Alex Schumann  <rubin@afternet.org>

	* src/proto-common.c: removing +d. needs to be a config option
	or something.

	* src/nickserv.help: modified main help reply of authserv

	* src/nickserv.c: added title, epithet, and fakehost to oset listing

	* src/modcmd.c: fixed up auto-help & alias command handling. Needs
	totally redesigned though.

2005-04-15  Alex Schumann  <rubin@afternet.org>

	* src/proto-common.c: Temp fix for x3 not seeing -hv modes being set
	at the same time. The whole block needs to be if/else instead of
	switch though, to be cleaner.

	* src/nickserv.help: added fakehost and title options to  help oset.

	* src/nickserv.c: removed 'style' setting. (was not being used in
	code anyway)

2005-04-04  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* src/proto-p10.c: Reinstated +d usermode.

2005-03-30  Alex Schumann  <rubin@afternet.org>

	* src/chanserv.c: Fixed unban. 

	* x3.conf.example: added note in snoop config that improper
	setting for bots nick will cause segfault.

2005-03-22  Alex Schumann  <rubin@afternet.org>

	* x3.conf.example: added sethost/fakehost settings to conf

2005-03-19  Alex Schumann  <rubin@afternet.org>

	* chanserv.c: Changed style of command outputs, added userlevel back
	to users list.

	* opserv.c: Changed style of command outputs, removed warn feature

	* tools.c: shortened duration string lengths

	* main.c: shortened duration string lengths

	* sendmail.c: Changed style of stats email

2005-03-18  Alex Schumann  <rubin@afternet.org>

	* Changed breef to brief...

	* chanserv.c: Changed to access level names instead of numbers.

2005-03-17  Alex Schumann  <rubin@afternet.org>


	* src/opserv.c: Improved readability of trace print output

	* src/chanserv.c: Improved cmd_list_users output & cleaned it up
	a little.

	* src/helpfile.c: Improved table_send readability (used in lots
	of listings including users and stats network etc)

2005-03-15  Alex Schumann  <rubin@afternet.org>

	* src/chanserv.c: Improved some syntax error reporting for commands
	
	* src/helpfile.c: Added a 'breef' help function
	
	* src/helpfile.h: Added a 'breef' help function
	
	* src/main.c: Improved some syntax error reporting for commands
	
	* src/modcmd.c: Improved some syntax error reporting for commands
	
	* src/modcmd.h: Improved some syntax error reporting for commands

2005-03-15  Reed Loden  <reed@reedloden.com>

	* Synchronization with srvx--devo--1.3--patch-19.

2005-03-12  Alex Schumann  <rubin@afternet.org>

	* src/common.h, src/opserv.h: more SRVX->X3 fixes

	* opserv.c: fixed SRVX defines to X3

	* src/nickserv.c: Applied patch to bring up to date with
	local uncommitted changes on afternets srvx2 tree. improved
	cookie gen code and removed /play from cookie messages.

	* src/all, src/Makefile*, Makefile.in: changed srvx to x3 in a
	bunch more places.

2005-03-07  Neil Spierling  <sirvulcan@sirvulcan.co.nz>

	* nickserv.help: Added odelcookie section.

	* src/nickserv.c: Added odelcookie for deleting auth cookies and email
	cookies.

	* src/md5.c: Cleaned up compile warnings.

	* src/nickserv.help: Added odelcookie section.

***********************************************************************/

#define CVS_VERSION "$Id$"

